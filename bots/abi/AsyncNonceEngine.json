{
  "_format": "hh-sol-artifact-1",
  "contractName": "AsyncNonceEngine",
  "sourceName": "contracts/settlement/AsyncNonceEngine.sol",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "AlreadySettled",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidNonce",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotAuthorized",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotOwner",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "asyncNonce",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "txHash",
          "type": "bytes32"
        }
      ],
      "name": "AsyncTxCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "asyncNonce",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "txHash",
          "type": "bytes32"
        }
      ],
      "name": "AsyncTxDiscarded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "asyncNonce",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "txHash",
          "type": "bytes32"
        }
      ],
      "name": "AsyncTxSettled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "settledNonce",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256[]",
          "name": "discardedNonces",
          "type": "uint256[]"
        }
      ],
      "name": "QuantumCollapse",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "authorizedContracts",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_sender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_asyncNonce",
          "type": "uint256"
        },
        {
          "internalType": "bytes32",
          "name": "_txHash",
          "type": "bytes32"
        }
      ],
      "name": "createAsyncBranch",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_sender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_asyncNonce",
          "type": "uint256"
        }
      ],
      "name": "getAsyncState",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "sender",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "asyncNonce",
              "type": "uint256"
            },
            {
              "internalType": "bytes32",
              "name": "txHash",
              "type": "bytes32"
            },
            {
              "internalType": "enum AsyncNonceEngine.TxState",
              "name": "state",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "timestamp",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "settlementBlock",
              "type": "uint256"
            }
          ],
          "internalType": "struct AsyncNonceEngine.AsyncTransaction",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_sender",
          "type": "address"
        }
      ],
      "name": "getLastSettledNonce",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_sender",
          "type": "address"
        }
      ],
      "name": "hasPendingAsync",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_contract",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "_isAuthorized",
          "type": "bool"
        }
      ],
      "name": "setAuthorizedContract",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_settlementNonce",
          "type": "uint256"
        }
      ],
      "name": "settleAsync",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50600380546001600160a01b031916339081179091556000908152600460205260409020805460ff19166001179055610bd18061004e6000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80638da5cb5b1161005b5780638da5cb5b14610119578063d5b9221b14610144578063e356fddc14610167578063f2fa73921461019e57600080fd5b80630866bbfd1461008d57806317cc3617146100b657806318ef6e6a146100cb5780634cc715e0146100ee575b600080fd5b6100a061009b366004610992565b6101b1565b6040516100ad91906109d2565b60405180910390f35b6100c96100c4366004610a3c565b610286565b005b6100de6100d9366004610a55565b6106bc565b60405190151581526020016100ad565b6100de6100fc366004610a88565b6001600160a01b0316600090815260016020526040902054151590565b60035461012c906001600160a01b031681565b6040516001600160a01b0390911681526020016100ad565b6100de610152366004610a88565b60046020526000908152604090205460ff1681565b610190610175366004610a88565b6001600160a01b031660009081526002602052604090205490565b6040519081526020016100ad565b6100c96101ac366004610aa3565b6108d4565b6101ea6040805160c081018252600080825260208201819052918101829052906060820190815260200160008152602001600081525090565b6001600160a01b03808416600090815260208181526040808320868452825291829020825160c081018452815490941684526001810154918401919091526002808201549284019290925260038101549091606084019160ff1690811115610254576102546109bc565b6002811115610265576102656109bc565b81526020016004820154815260200160058201548152505090505b92915050565b3360009081526002602052604090205481116102b45760405162560ff960e81b815260040160405180910390fd5b3360009081526001602052604081205467ffffffffffffffff8111156102dc576102dc610adf565b604051908082528060200260200182016040528015610305578160200160208202803683370190505b50905060008060005b336000908152600160205260409020548110156104885733600090815260016020526040812080548390811061034657610346610af5565b906000526020600020015490508581036103ce573360008181526020818152604080832085845282529182902060038101805460ff191660019081179091554360058301556002820154845187815293840152965092917f6eb0c94d8bb49c84ec170db8dffdfc830265ffbade1f8a66054ece162ce545e9910160405180910390a250610475565b858110156104755733600090815260208181526040808320848452909152902060038101805460ff191660021790554360058201558551829087908790811061041957610419610af5565b60209081029190910101528461042e81610b21565b60028301546040805186815260208101929092529197503392507fcbab151901e1f11c03715b7c657a9282cbdbeb67211b75a17877a637db06a39a910160405180910390a2505b508061048081610b21565b91505061030e565b50806104a757604051633ab3447f60e11b815260040160405180910390fd5b3360009081526001602081905260408220546104c4908590610b3a565b6104ce9190610b3a565b67ffffffffffffffff8111156104e6576104e6610adf565b60405190808252806020026020018201604052801561050f578160200160208202803683370190505b5090506000805b336000908152600160205260409020548110156105a25733600090815260016020526040812080548390811061054e5761054e610af5565b906000526020600020015490508781111561058f578084848151811061057657610576610af5565b60209081029190910101528261058b81610b21565b9350505b508061059a81610b21565b915050610516565b5033600090815260016020908152604090912083516105c392850190610916565b503360009081526002602052604081208790558467ffffffffffffffff8111156105ef576105ef610adf565b604051908082528060200260200182016040528015610618578160200160208202803683370190505b50905060005b8581101561066f5786818151811061063857610638610af5565b602002602001015182828151811061065257610652610af5565b60209081029190910101528061066781610b21565b91505061061e565b50336001600160a01b03167fd6a3136b7116b486db5e19067e32e65a61290add8309ea14002f57f479ea1c3688836040516106ab929190610b4d565b60405180910390a250505050505050565b3360009081526004602052604081205460ff166106ec5760405163ea8e4eb560e01b815260040160405180910390fd5b6001600160a01b038416600090815260026020526040902054831161072457604051633ab3447f60e11b815260040160405180910390fd5b60005b6001600160a01b0385166000908152600160205260409020548110156107a0576001600160a01b038516600090815260016020526040902080548591908390811061077457610774610af5565b90600052602060002001540361078e5760019150506108cd565b8061079881610b21565b915050610727565b506040805160c0810182526001600160a01b03868116808352602080840188815284860188815260006060870181815242608089015260a088018290529481528084528781208b825290935295909120845181546001600160a01b03191694169390931783555160018084019190915593516002808401919091559051600383018054949593949193909260ff19909216918490811115610843576108436109bc565b02179055506080820151600482015560a0909101516005909101556001600160a01b0384166000818152600160208181526040808420805493840181558452922001859055517f671c9a56c774a0fda65f2f1f44eebc1137868e20f901338c7f2c5b62f8b0b763906108c19086908690918252602082015260400190565b60405180910390a25060015b9392505050565b6003546001600160a01b031633146108eb57600080fd5b6001600160a01b03919091166000908152600460205260409020805460ff1916911515919091179055565b828054828255906000526020600020908101928215610951579160200282015b82811115610951578251825591602001919060010190610936565b5061095d929150610961565b5090565b5b8082111561095d5760008155600101610962565b80356001600160a01b038116811461098d57600080fd5b919050565b600080604083850312156109a557600080fd5b6109ae83610976565b946020939093013593505050565b634e487b7160e01b600052602160045260246000fd5b81516001600160a01b031681526020808301519082015260408083015190820152606082015160c082019060038110610a1b57634e487b7160e01b600052602160045260246000fd5b806060840152506080830151608083015260a083015160a083015292915050565b600060208284031215610a4e57600080fd5b5035919050565b600080600060608486031215610a6a57600080fd5b610a7384610976565b95602085013595506040909401359392505050565b600060208284031215610a9a57600080fd5b6108cd82610976565b60008060408385031215610ab657600080fd5b610abf83610976565b915060208301358015158114610ad457600080fd5b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610b3357610b33610b0b565b5060010190565b8181038181111561028057610280610b0b565b6000604082018483526020604081850152818551808452606086019150828701935060005b81811015610b8e57845183529383019391830191600101610b72565b509097965050505050505056fea2646970667358221220eff128087d0e9d78f6ffbcd658d65b9afa33a2b3677914bde4db16329330017264736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100885760003560e01c80638da5cb5b1161005b5780638da5cb5b14610119578063d5b9221b14610144578063e356fddc14610167578063f2fa73921461019e57600080fd5b80630866bbfd1461008d57806317cc3617146100b657806318ef6e6a146100cb5780634cc715e0146100ee575b600080fd5b6100a061009b366004610992565b6101b1565b6040516100ad91906109d2565b60405180910390f35b6100c96100c4366004610a3c565b610286565b005b6100de6100d9366004610a55565b6106bc565b60405190151581526020016100ad565b6100de6100fc366004610a88565b6001600160a01b0316600090815260016020526040902054151590565b60035461012c906001600160a01b031681565b6040516001600160a01b0390911681526020016100ad565b6100de610152366004610a88565b60046020526000908152604090205460ff1681565b610190610175366004610a88565b6001600160a01b031660009081526002602052604090205490565b6040519081526020016100ad565b6100c96101ac366004610aa3565b6108d4565b6101ea6040805160c081018252600080825260208201819052918101829052906060820190815260200160008152602001600081525090565b6001600160a01b03808416600090815260208181526040808320868452825291829020825160c081018452815490941684526001810154918401919091526002808201549284019290925260038101549091606084019160ff1690811115610254576102546109bc565b6002811115610265576102656109bc565b81526020016004820154815260200160058201548152505090505b92915050565b3360009081526002602052604090205481116102b45760405162560ff960e81b815260040160405180910390fd5b3360009081526001602052604081205467ffffffffffffffff8111156102dc576102dc610adf565b604051908082528060200260200182016040528015610305578160200160208202803683370190505b50905060008060005b336000908152600160205260409020548110156104885733600090815260016020526040812080548390811061034657610346610af5565b906000526020600020015490508581036103ce573360008181526020818152604080832085845282529182902060038101805460ff191660019081179091554360058301556002820154845187815293840152965092917f6eb0c94d8bb49c84ec170db8dffdfc830265ffbade1f8a66054ece162ce545e9910160405180910390a250610475565b858110156104755733600090815260208181526040808320848452909152902060038101805460ff191660021790554360058201558551829087908790811061041957610419610af5565b60209081029190910101528461042e81610b21565b60028301546040805186815260208101929092529197503392507fcbab151901e1f11c03715b7c657a9282cbdbeb67211b75a17877a637db06a39a910160405180910390a2505b508061048081610b21565b91505061030e565b50806104a757604051633ab3447f60e11b815260040160405180910390fd5b3360009081526001602081905260408220546104c4908590610b3a565b6104ce9190610b3a565b67ffffffffffffffff8111156104e6576104e6610adf565b60405190808252806020026020018201604052801561050f578160200160208202803683370190505b5090506000805b336000908152600160205260409020548110156105a25733600090815260016020526040812080548390811061054e5761054e610af5565b906000526020600020015490508781111561058f578084848151811061057657610576610af5565b60209081029190910101528261058b81610b21565b9350505b508061059a81610b21565b915050610516565b5033600090815260016020908152604090912083516105c392850190610916565b503360009081526002602052604081208790558467ffffffffffffffff8111156105ef576105ef610adf565b604051908082528060200260200182016040528015610618578160200160208202803683370190505b50905060005b8581101561066f5786818151811061063857610638610af5565b602002602001015182828151811061065257610652610af5565b60209081029190910101528061066781610b21565b91505061061e565b50336001600160a01b03167fd6a3136b7116b486db5e19067e32e65a61290add8309ea14002f57f479ea1c3688836040516106ab929190610b4d565b60405180910390a250505050505050565b3360009081526004602052604081205460ff166106ec5760405163ea8e4eb560e01b815260040160405180910390fd5b6001600160a01b038416600090815260026020526040902054831161072457604051633ab3447f60e11b815260040160405180910390fd5b60005b6001600160a01b0385166000908152600160205260409020548110156107a0576001600160a01b038516600090815260016020526040902080548591908390811061077457610774610af5565b90600052602060002001540361078e5760019150506108cd565b8061079881610b21565b915050610727565b506040805160c0810182526001600160a01b03868116808352602080840188815284860188815260006060870181815242608089015260a088018290529481528084528781208b825290935295909120845181546001600160a01b03191694169390931783555160018084019190915593516002808401919091559051600383018054949593949193909260ff19909216918490811115610843576108436109bc565b02179055506080820151600482015560a0909101516005909101556001600160a01b0384166000818152600160208181526040808420805493840181558452922001859055517f671c9a56c774a0fda65f2f1f44eebc1137868e20f901338c7f2c5b62f8b0b763906108c19086908690918252602082015260400190565b60405180910390a25060015b9392505050565b6003546001600160a01b031633146108eb57600080fd5b6001600160a01b03919091166000908152600460205260409020805460ff1916911515919091179055565b828054828255906000526020600020908101928215610951579160200282015b82811115610951578251825591602001919060010190610936565b5061095d929150610961565b5090565b5b8082111561095d5760008155600101610962565b80356001600160a01b038116811461098d57600080fd5b919050565b600080604083850312156109a557600080fd5b6109ae83610976565b946020939093013593505050565b634e487b7160e01b600052602160045260246000fd5b81516001600160a01b031681526020808301519082015260408083015190820152606082015160c082019060038110610a1b57634e487b7160e01b600052602160045260246000fd5b806060840152506080830151608083015260a083015160a083015292915050565b600060208284031215610a4e57600080fd5b5035919050565b600080600060608486031215610a6a57600080fd5b610a7384610976565b95602085013595506040909401359392505050565b600060208284031215610a9a57600080fd5b6108cd82610976565b60008060408385031215610ab657600080fd5b610abf83610976565b915060208301358015158114610ad457600080fd5b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610b3357610b33610b0b565b5060010190565b8181038181111561028057610280610b0b565b6000604082018483526020604081850152818551808452606086019150828701935060005b81811015610b8e57845183529383019391830191600101610b72565b509097965050505050505056fea2646970667358221220eff128087d0e9d78f6ffbcd658d65b9afa33a2b3677914bde4db16329330017264736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
